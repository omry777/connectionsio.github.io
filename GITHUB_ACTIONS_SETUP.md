# ğŸ¤– GitHub Actions - Automated Daily Puzzle Generation

## ğŸ¯ What This Does

Your game now has **fully automated puzzle generation**! Every day at 2 AM UTC, GitHub Actions will:

1. âœ… Run the Gemini AI puzzle generator
2. âœ… Create tomorrow's puzzle
3. âœ… Validate for duplicates
4. âœ… Commit to `puzzles.json`
5. âœ… Push to your repository
6. âœ… Your game auto-updates!

**No manual work needed - runs forever!** ğŸ‰

---

## ğŸ”‘ Setup (5 Minutes)

### Step 1: Get Your Gemini API Key

If you don't have one yet:
1. Go to: https://makersuite.google.com/app/apikey
2. Sign in with Google
3. Click "Create API Key"
4. Copy the key (starts with `AIza...`)

---

### Step 2: Add API Key as GitHub Secret

**This is CRITICAL** - keeps your key safe!

1. Go to your GitHub repository
2. Click **Settings** (top menu)
3. In left sidebar, click **Secrets and variables** â†’ **Actions**
4. Click **New repository secret**
5. Enter:
   - **Name:** `GEMINI_API_KEY`
   - **Secret:** Paste your Gemini API key
6. Click **Add secret**

âœ… **Done!** Your key is now securely stored and will never be exposed.

---

### Step 3: Enable GitHub Actions

1. Go to your repository on GitHub
2. Click **Actions** tab (top menu)
3. If prompted, click **"I understand my workflows, go ahead and enable them"**
4. You should see: **"Generate Daily Puzzle"** workflow

âœ… **Enabled!**

---

### Step 4: Test It! (Optional but Recommended)

Before waiting for the scheduled run, test it manually:

1. Go to **Actions** tab
2. Click **"Generate Daily Puzzle"** (left sidebar)
3. Click **"Run workflow"** button (right side)
4. Optionally enter a date (or leave blank for tomorrow)
5. Click **"Run workflow"**

Watch it run! Should take ~30 seconds.

**Expected result:**
- âœ… Workflow completes successfully
- âœ… New puzzle appears in `puzzles.json`
- âœ… Automatic commit created

---

## ğŸ“… Schedule

**Default:** Runs every day at **2 AM UTC** (4 AM Israel time)

This generates tomorrow's puzzle so it's always ready!

### Want to Change the Time?

Edit `.github/workflows/generate-daily-puzzle.yml`:

```yaml
schedule:
  - cron: '0 2 * * *'  # Change this
```

**Examples:**
- `'0 0 * * *'` - Midnight UTC
- `'0 12 * * *'` - Noon UTC  
- `'0 22 * * *'` - 10 PM UTC (Midnight Israel time)

---

## ğŸ® Manual Generation

You can also generate puzzles manually:

### Via GitHub Actions UI:
1. Go to **Actions** â†’ **Generate Daily Puzzle**
2. Click **Run workflow**
3. Enter specific date (optional): `2025-12-25`
4. Click **Run workflow**

### Via Git Push:
The workflow file is now in your repo, so:
```bash
git add .github/workflows/generate-daily-puzzle.yml
git commit -m "ğŸ¤– Add automated daily puzzle generation"
git push
```

---

## ğŸ” Monitoring

### Check if it's working:

1. **View Workflow Runs:**
   - Go to **Actions** tab
   - See all runs with âœ… or âŒ status

2. **Check Commits:**
   - Look for commits by "GitHub Actions Bot"
   - Message: "ğŸ² Auto-generated puzzle for YYYY-MM-DD"

3. **Verify Puzzles:**
   - Check `puzzles.json` gets updated daily
   - New puzzle added each day

---

## âš ï¸ Troubleshooting

### Workflow fails with "GEMINI_API_KEY not found"
**Fix:** Add the secret in GitHub Settings â†’ Secrets and variables â†’ Actions

### No puzzle generated (no changes)
**Cause:** Puzzle for that date already exists  
**Fix:** Normal! The workflow checks for duplicates

### Authentication failed
**Fix:** Make sure you pushed the workflow file to your repository

### Rate limit exceeded
**Cause:** Too many requests to Gemini (unlikely with 60/min limit)  
**Fix:** Workflow will retry automatically

---

## ğŸ’° Costs

### GitHub Actions:
- âœ… **FREE** for public repositories
- âœ… 2,000 minutes/month for private repos (more than enough)

### Gemini API:
- âœ… **FREE** - 60 requests per minute
- âœ… Each puzzle = 1 request
- âœ… Daily generation = 30 requests/month

**Total cost: $0.00** ğŸ‰

---

## ğŸ”’ Security

### Your API Key is Safe:
- âœ… Stored as encrypted GitHub Secret
- âœ… Never appears in logs
- âœ… Never committed to repository
- âœ… Only accessible during workflow execution

### The Workflow:
- âœ… Uses official GitHub Actions
- âœ… Runs in isolated environment
- âœ… Limited permissions (only writes to repo)

---

## ğŸ“Š What Gets Committed

Every day, you'll see a new commit:

```
ğŸ² Auto-generated puzzle for 2025-12-01

Generated by Gemini AI
Triggered by: schedule
Workflow: Generate Daily Puzzle

1 file changed: puzzles.json
```

Clean, automated, perfect! âœ¨

---

## ğŸ¯ Advanced Options

### Generate Multiple Days at Once

Modify the workflow to generate a week:

```yaml
run: node generate-puzzle-gemini.js --days 7
```

### Add Notifications

Get notified when puzzles are generated:

```yaml
- name: Send notification
  if: steps.check_changes.outputs.changed == 'true'
  run: |
    # Add Slack/Discord webhook here
```

### Backup Before Generation

Add a backup step:

```yaml
- name: Backup puzzles
  run: cp puzzles.json puzzles.backup.json
```

---

## ğŸ‰ You're All Set!

Your game now runs on autopilot! ğŸš€

**What happens next:**
1. Tonight at 2 AM UTC - First automatic puzzle generated
2. Every night after - New puzzle appears
3. Your players always have fresh content
4. You do nothing! ğŸ˜

---

## ğŸ“š Resources

- **GitHub Actions Docs:** https://docs.github.com/en/actions
- **Cron Schedule:** https://crontab.guru/
- **Gemini API:** https://ai.google.dev/docs

---

**Enjoy your fully automated puzzle game!** ğŸ®âœ¨

